// Project Details Data
const projectsData = {
    ism: {
        title: "ISM - Industrias San Miguel",
        subtitle: "Gestión de Redes Sociales y Contenido Educativo",
        description: `Industrias San Miguel (ISM) es un conglomerado peruano líder, dueño de marcas icónicas —como ORO, KR y Agua Vida— que gozan de una fuerte recordación en el mercado nacional. El desafío central fue elevar su presencia digital para lograr una interacción robusta y un alto engagement en redes sociales.

​Estrategia y Desarrollo

Mi trabajo se centró en la estrategia digital, iniciando con  benchmarking de la competencia y las tendencias del sector. Este análisis fue clave para definir pilares de contenido únicos que se alinearon de manera precisa con la personalidad y valores de cada marca.
A partir de esta base estratégica, desarrollé una matriz de contenido sistemática con el objetivo claro de construir una comunidad activa alrededor de cada producto.

​Resultados

El resultado fue la creación constante de contenido de valor mediante posts interactivos y dinámicas que incentivaron la participación activa de la audiencia. Esto garantizó un flujo de contenido organizado, coherente y que se tradujo en un alto nivel de conexión y engagement con los consumidores.`,
        video: "Assets/ISM/ism.mp4",
        galleries: [
            [
                { type: 'video', src: 'Assets/ISM/1.mp4', alt: 'ISM Video 1' },
                { type: 'image', src: 'Assets/ISM/1.png', alt: 'ISM Asset 1' },
                { type: 'video', src: 'Assets/ISM/2.mp4', alt: 'ISM Video 2' },
                { type: 'image', src: 'Assets/ISM/2.png', alt: 'ISM Asset 2' },
                { type: 'image', src: 'Assets/ISM/3.png', alt: 'ISM Asset 3' }
            ],
            [
                { type: 'image', src: 'Assets/ISM/oro1.png', alt: 'ISM Oro 1' },
                { type: 'image', src: 'Assets/ISM/oro2.png', alt: 'ISM Oro 2' },
                { type: 'image', src: 'Assets/ISM/oro3.png', alt: 'ISM Oro 3' },
                { type: 'video', src: 'Assets/ISM/orovideo.mp4', alt: 'ISM Oro Video' },
                { type: 'video', src: 'Assets/ISM/orovideo2.mp4', alt: 'ISM Oro Video 2' }
            ],
            [
                { type: 'image', src: 'Assets/ISM/vida1.png', alt: 'ISM Vida 1' },
                { type: 'image', src: 'Assets/ISM/vida2.png', alt: 'ISM Vida 2' },
                { type: 'image', src: 'Assets/ISM/vida3.png', alt: 'ISM Vida 3' },
                { type: 'image', src: 'Assets/ISM/vida4.png', alt: 'ISM Vida 4' },
                { type: 'video', src: 'Assets/ISM/vidavideo.mp4', alt: 'ISM Vida Video' }
            ]
        ],

        objectives: [
            "Aumentar la visibilidad de la marca en redes sociales",
            "Generar engagement con estudiantes potenciales",
            "Comunicar la propuesta de valor educativa",
            "Incrementar las consultas e inscripciones"
        ],
        services: [
            "Gestión de redes sociales (Instagram, Facebook, TikTok)",
            "Creación de contenido audiovisual",
            "Diseño gráfico para publicaciones",
            "Estrategia de contenido educativo",
            "Community management",
            "Campañas de captación digital"
        ],
        results: [
            { label: "Alcance mensual", value: "+150K" },
            { label: "Engagement rate", value: "8.5%" },
            { label: "Nuevos seguidores", value: "+5K" },
            { label: "Consultas generadas", value: "+300" }
        ]
    },
    casaterra: {
        title: "Casa Terra",
        subtitle: "Estrategia de contenido",
        description: `Casaterra es una inmobiliaria chilena con un público bien definido: jóvenes y familias que están en la búsqueda de su primera propiedad.
        
Para conectar con ellos, convertí la información inmobiliaria —normalmente densa, fría y llena de tecnicismos— en contenido cercano, útil y altamente compartible.

Partí de insights reales: sus dudas, temores y motivaciones. Luego lo fusioné con trends, formatos dinámicos y una narrativa más humana, logrando que temas complejos fluyeran naturalmente en el feed.

Y cuando tocaba hablar de ventas, se hizo con estrategia: sin urgencias forzadas, mostrando valor, aclarando procesos y guiando de forma clara.

Resultado: mayor crecimiento de comunidad, más interacción y un aumento sólido en leads calificados.`,
        video: "Assets/CasaTerra/casaterra.mp4",
        gallery: [
            { type: 'video', src: 'Assets/CasaTerra/casaterra1.mp4', alt: 'CasaTerra Video 1' },
            { type: 'video', src: 'Assets/CasaTerra/casaterra2.mp4', alt: 'CasaTerra Video 2' },
            { type: 'video', src: 'Assets/CasaTerra/casaterra.mp4', alt: 'CasaTerra Video 3' },
            { type: 'image', src: 'Assets/CasaTerra/casaterra1.png', alt: 'CasaTerra 1' },
            { type: 'image', src: 'Assets/CasaTerra/casaterra2.png', alt: 'CasaTerra 2' },
            { type: 'image', src: 'Assets/CasaTerra/casaterra3.png', alt: 'CasaTerra 3' },
            { type: 'image', src: 'Assets/CasaTerra/casaterra4.png', alt: 'CasaTerra 4' },
            { type: 'image', src: 'Assets/CasaTerra/casaterra5.png', alt: 'CasaTerra 5' },
            { type: 'image', src: 'Assets/CasaTerra/casaterra6.png', alt: 'CasaTerra 6' }
        ],
        galleryNew: [
            { type: 'image', src: 'Assets/CasaTerra/casaterra7.png', alt: 'Exclusiva 1' },
            { type: 'image', src: 'Assets/CasaTerra/casaterra8.png', alt: 'Exclusiva 2' }
        ],
        results: [
            { label: "Crecimiento de seguidores", value: "+7K" },
            { label: "Engagement promedio", value: "12%" },
            { label: "Propiedades vendidas", value: "15" }
        ]
    },
    delicranch: {
        title: "DeliKranch",
        subtitle: "Estrategia de contenido",
        description: `Delikrach es una nueva marca peruana de cereales lanzada por Industrias San Miguel. Mi misión fue acompañar su llegada al mercado creando una identidad digital fresca, clara y alineada a su propuesta de marca, capaz de conectar con su público desde el primer día.

Desarrollé una estrategia basada en pilares de contenido y un copywriting coherente y atractivo, logrando una grilla ordenada, visualmente sólida y con un estilo reconocible.

El crecimiento fue mayormente orgánico (alrededor del 85%) y los resultados se dieron rápido: pasamos de 0 a más de 2,000 seguidores en Instagram y cerca de 7,700 en Facebook.

El resultado fue una presencia digital dinámica, cercana y en constante crecimiento, con una audiencia que conectó de manera natural desde el inicio.`,
        video: "Assets/Delicranch/deli.mp4",
        gallery: [
            { type: 'video', src: 'Assets/Delicranch/1.mp4', alt: 'Delicranch Video 1' },
            { type: 'image', src: 'Assets/Delicranch/1.png', alt: 'Delicranch 1' },
            { type: 'video', src: 'Assets/Delicranch/2.mp4', alt: 'Delicranch Video 2' },
            { type: 'image', src: 'Assets/Delicranch/2.png', alt: 'Delicranch 2' },
            { type: 'image', src: 'Assets/Delicranch/3.png', alt: 'Delicranch 3' }
        ],

        results: [
            { label: "Alcance orgánico", value: "+200K" },
            { label: "Interacciones", value: "+25K" },
            { label: "Aumento en ventas", value: "35%" },
            { label: "Seguidores activos", value: "+8K" }
        ]
    },
    entel: {
        title: "Entel",
        subtitle: "Campañas de Telecomunicaciones",
        description: "Apoyo en creación de contenido y campañas digitales para operadora de telecomunicaciones, enfocado en promociones, lanzamientos de productos y engagement con clientes.",
        video: null,
        gallery: [
            { type: 'image', src: 'Assets/Entel/entel1.png', alt: 'Entel 1' },
            { type: 'image', src: 'Assets/Entel/entel2.png', alt: 'Entel 2' },
            { type: 'image', src: 'Assets/Entel/entel3.png', alt: 'Entel 3' }
        ],
        galleryNew: [
            { type: 'image', src: 'Assets/Entel/entel1.png', alt: 'Exclusiva 1' },
            { type: 'image', src: 'Assets/Entel/entel2.png', alt: 'Exclusiva 2' },
            { type: 'image', src: 'Assets/Entel/entel3.png', alt: 'Exclusiva 2' }
        ],
        results: [
            { label: "Piezas creadas", value: "+500" },
            { label: "Campañas ejecutadas", value: "12" },
            { label: "Alcance total", value: "+1M" },
            { label: "Engagement", value: "6.8%" }
        ]
    },
    max: {
        title: "Max",
        subtitle: "Contenido para Plataforma de Streaming",
        description: `Max Lash es una marca peruana especializada en el cuidado de pestañas y cejas.
Para potenciar su presencia digital, trabajé una estrategia con dos enfoques: aumentar su recordación y reforzar su imagen como un servicio premium.
Mi rol fue diseñar y ejecutar la estrategia de contenido para sus redes y otros canales.

Esto incluyó:

Crear pilares de contenido enfocados en educación, cuidado y experiencia de servicio.

Definir un tono escrito que reflejara exclusividad y calidad.

Proponer formatos que aumentaran la interacción y la conexión con la audiencia.

Resultados principales

​Mayor interacción y una comunidad más activa.

Posicionamiento sólido como marca de tratamientos de belleza exclusivo.

Presencia digital fuerte, logrando que Max Lash permanezca en el “top of mind” del público en su catergoria.`,
        video: null,
        gallery: [
            { type: 'video', src: 'Assets/Max/video1.mp4', alt: 'Max Video 1' },
            { type: 'image', src: 'Assets/Max/max1.png', alt: 'Max 1' },
            { type: 'video', src: 'Assets/Max/video2.mp4', alt: 'Max Video 2' },
            { type: 'image', src: 'Assets/Max/max2.png', alt: 'Max 2' },
            { type: 'video', src: 'Assets/Max/video3.mp4', alt: 'Max Video 3' },
            { type: 'image', src: 'Assets/Max/max3.png', alt: 'Max 3' }
        ],

        results: [
            { label: "Publicaciones creadas", value: "+300" },
            { label: "Alcance promedio", value: "500K" },
            { label: "Engagement rate", value: "9.2%" },
            { label: "Campañas de estreno", value: "8" }
        ]
    }
};

// Modal Functions
let carouselIntervals = [];

// Create vertical phone carousel (for ISM)
function createCarouselHTML(slides, index) {
    if (!slides || slides.length === 0) return '';

    const slidesHTML = slides.map((slide, i) => {
        let mediaContent = '';
        if (slide.type === 'video') {
            mediaContent = `<video src="${slide.src}" class="carousel-media" autoplay muted loop playsinline></video>`;
        } else {
            mediaContent = `<img src="${slide.src}" class="carousel-media" alt="Slide ${i + 1}">`;
        }
        return `<div class="carousel-slide">${mediaContent}</div>`;
    }).join('');

    const indicatorsHTML = slides.length > 1 ? `
        <div class="carousel-indicators">
            ${slides.map((_, i) => `<span class="carousel-dot dot-${index} ${i === 0 ? 'active' : ''}" onclick="goToSlide(${index}, ${i})"></span>`).join('')}
        </div>
    ` : '';

    return `
        <div class="phone-frame">
            <div class="carousel-container">
                <div class="carousel-track" id="carouselTrack-${index}">
                    ${slidesHTML}
                </div>
                ${indicatorsHTML}
            </div>
        </div>
    `;
}

function startCarousel(slides, index) {
    if (!slides || slides.length <= 1) return;

    let currentIndex = 0;
    const track = document.getElementById(`carouselTrack-${index}`);
    const dots = document.querySelectorAll(`.dot-${index}`);

    const updateCarousel = (slideIndex) => {
        if (track) track.style.transform = `translateX(-${slideIndex * 100}%)`;
        dots.forEach(dot => dot.classList.remove('active'));
        if (dots[slideIndex]) dots[slideIndex].classList.add('active');
    };

    // Randomize start time slightly to avoid synch robotic feel
    setTimeout(() => {
        const interval = setInterval(() => {
            currentIndex = (currentIndex + 1) % slides.length;
            updateCarousel(currentIndex);
        }, 3000 + (index * 200));
        carouselIntervals.push(interval);
    }, index * 500);

    // Global handler for this specific carousel instance
    // Note: This global function approach is simplistic; ideally would be scoped better.
    // For now we patch the global goToSlide to handle multiple IDs.
}

// Global scope helper
window.goToSlide = (carouselIndex, slideIndex) => {
    // We can't easily clear specific interval without mapping, so let's just 
    // update the view and let the interval continue (or clear all to be safe).
    // For simplicity: Update view immediately.
    const track = document.getElementById(`carouselTrack-${carouselIndex}`);
    const dots = document.querySelectorAll(`.dot-${carouselIndex}`);

    if (track) track.style.transform = `translateX(-${slideIndex * 100}%)`;
    dots.forEach(dot => dot.classList.remove('active'));
    if (dots[slideIndex]) dots[slideIndex].classList.add('active');
};


function openProjectModal(projectId) {
    const project = projectsData[projectId];
    if (!project) return;

    const modal = document.getElementById('projectModal');

    // Populate modal content
    document.querySelector('.project-modal-title').textContent = project.title;
    document.querySelector('.project-modal-subtitle').textContent = project.subtitle;
    document.querySelector('.project-description').innerHTML = project.description.replace(/\n/g, '<br>');

    // Populate media
    const mediaContainer = document.querySelector('.project-modal-media');

    // Clear previous intervals
    carouselIntervals.forEach(clearInterval);
    carouselIntervals = [];
    document.querySelector('.project-modal-media').innerHTML = ''; // Clear content

    let contentHTML = '';
    let galleriesToInit = [];

    // Check if ISM (multiple galleries)
    if (project.galleries) {
        contentHTML += '<div class="carousel-grid">';
        project.galleries.forEach((gallery, i) => {
            contentHTML += createCarouselHTML(gallery, i);
            galleriesToInit.push({ slides: gallery, index: i });
        });
        contentHTML += '</div>';
    } else {
        // Standard single carousel
        contentHTML += '<div class="phone-wrapper">';
        let slides = [];
        if (project.gallery && project.gallery.length > 0) {
            slides = project.gallery;
        } else if (project.video) {
            slides.push({ type: 'video', src: project.video });
        }

        if (slides.length > 0) {
            contentHTML += createCarouselHTML(slides, 0);
            galleriesToInit.push({ slides: slides, index: 0 });
        } else {
            // Placeholder
            contentHTML += `<div class="project-modal-placeholder">No Media</div>`;
        }
        contentHTML += '</div>';
    }

    mediaContainer.innerHTML = contentHTML;

    // Start Carousels
    galleriesToInit.forEach(item => {
        startCarousel(item.slides, item.index);
    });


    // Populate results
    const resultsGrid = document.querySelector('.project-results-grid');
    resultsGrid.innerHTML = project.results ? project.results.map(result => `
        <div class="result-item">
            <div class="result-value">${result.value}</div>
            <div class="result-label">${result.label}</div>
        </div>
    `).join('') : '';

    // Show modal
    modal.classList.add('active');
    document.body.style.overflow = 'hidden';
}

function closeProjectModal() {
    carouselIntervals.forEach(clearInterval);
    carouselIntervals = [];

    const modal = document.getElementById('projectModal');
    modal.classList.remove('active');
    document.body.style.overflow = '';
    document.querySelector('.project-modal-media').innerHTML = '';
}


// Horizontal Modal Functions (for standard projects)
let horizontalCarouselInterval;

function openHorizontalModal(projectId) {
    const project = projectsData[projectId];
    if (!project) return;

    const modal = document.getElementById('horizontalModal');

    // Populate horizontal carousel only
    const mediaContainer = modal.querySelector('.horizontal-modal-media');

    // Clear previous interval
    clearInterval(horizontalCarouselInterval);
    mediaContainer.innerHTML = '';

    let slides = [];
    // Use galleryNew if exists, otherwise fall back to gallery
    if (project.galleryNew && project.galleryNew.length > 0) {
        slides = project.galleryNew;
    } else if (project.gallery && project.gallery.length > 0) {
        slides = project.gallery;
    } else if (project.video) {
        slides.push({ type: 'video', src: project.video });
    }

    if (slides.length > 0) {
        // Generate Slides HTML
        const slidesHTML = slides.map((slide, i) => {
            let mediaContent = '';
            if (slide.type === 'video') {
                mediaContent = `<video src="${slide.src}" class="horizontal-carousel-media" autoplay muted loop playsinline></video>`;
            } else {
                mediaContent = `<img src="${slide.src}" class="horizontal-carousel-media" alt="Slide ${i + 1}">`;
            }
            return `<div class="horizontal-carousel-slide">${mediaContent}</div>`;
        }).join('');

        // Generate Indicators HTML
        const indicatorsHTML = slides.length > 1 ? `
            <div class="carousel-indicators">
                ${slides.map((_, i) => `<span class="carousel-dot horizontal-dot ${i === 0 ? 'active' : ''}" onclick="goToHorizontalSlide(${i})"></span>`).join('')}
            </div>
        ` : '';

        mediaContainer.innerHTML = `
            <div class="horizontal-carousel-wrapper">
                <div class="horizontal-carousel-frame">
                    <div class="horizontal-carousel-container">
                        <div class="horizontal-carousel-track" id="horizontalCarouselTrack">
                            ${slidesHTML}
                        </div>
                        ${indicatorsHTML}
                    </div>
                </div>
            </div>
        `;

        // Auto-advance Logic
        if (slides.length > 1) {
            let currentIndex = 0;
            const track = document.getElementById('horizontalCarouselTrack');
            const dots = document.querySelectorAll('.horizontal-dot');

            const updateCarousel = (index) => {
                if (track) track.style.transform = `translateX(-${index * 100}%)`;
                dots.forEach(dot => dot.classList.remove('active'));
                if (dots[index]) dots[index].classList.add('active');
            };

            horizontalCarouselInterval = setInterval(() => {
                currentIndex = (currentIndex + 1) % slides.length;
                updateCarousel(currentIndex);
            }, 3000);

            // Global handler for manual navigation
            window.goToHorizontalSlide = (index) => {
                clearInterval(horizontalCarouselInterval);
                currentIndex = index;
                updateCarousel(currentIndex);
                // Restart auto-play
                horizontalCarouselInterval = setInterval(() => {
                    currentIndex = (currentIndex + 1) % slides.length;
                    updateCarousel(currentIndex);
                }, 3000);
            };
        }
    } else {
        mediaContainer.innerHTML = `<div class="project-modal-placeholder">No Media</div>`;
    }

    // Show modal
    modal.classList.add('active');
    document.body.style.overflow = 'hidden';
}

function closeHorizontalModal() {
    clearInterval(horizontalCarouselInterval);

    const modal = document.getElementById('horizontalModal');
    modal.classList.remove('active');
    document.body.style.overflow = '';
    modal.querySelector('.horizontal-modal-media').innerHTML = '';
}


// Close modal with ESC key
document.addEventListener('keydown', function (event) {
    if (event.key === 'Escape') {
        closeProjectModal();
    }
});
